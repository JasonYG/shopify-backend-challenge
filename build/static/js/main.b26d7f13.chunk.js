(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{224:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(35),r=n.n(i),s=n(4),o=n(235),u=n(232),l=n(98),j=n(237),b=n(120),p=n(121),d=n(14),h=n(23),m=n.n(h),O=n(40),f=n(241),x=n(233),g=n(230),y=n(238),v=n(234),S=n(16),w=n(117),C=n.n(w),T=n(3),I=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),r=Object(s.a)(i,2),o=r[0],u=r[1],j=Object(a.useState)(""),b=Object(s.a)(j,2),p=b[0],d=b[1],h=Object(a.useState)(""),w=Object(s.a)(h,2),I=w[0],A=w[1],P=Object(a.useState)(!1),k=Object(s.a)(P,2),E=k[0],U=k[1],N=function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/upload",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({picture:{name:o,encoding:n},price:p,username:I})});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent.image&&(U(!0),c(""),u(""),d(""),A(""));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=E?Object(T.jsx)(f.a,{content:"Successfully saved image!",onDismiss:function(){U((function(e){return!e}))},duration:2e3}):null;return Object(T.jsxs)(x.a,{children:[Object(T.jsx)("br",{}),Object(T.jsxs)(l.a,{title:"Upload an image to sell",sectioned:!0,children:[Object(T.jsx)(C.a,{withIcon:!0,buttonText:0===n.length?"Choose images":"Choose another image",onChange:function(e,t){c(t.pop()||"")},imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880}),Object(T.jsx)("div",{style:{textAlign:"center"},children:Object(T.jsx)("img",{src:n,style:{maxWidth:"100%"}})}),n.length>0&&Object(T.jsx)(g.a,{onSubmit:N,children:Object(T.jsxs)(y.a,{children:[Object(T.jsx)(v.a,{value:I,onChange:function(e){A(e)},label:"Username",type:"text",helpText:Object(T.jsx)("span",{children:"Enter in your username. You will need this to sell your image!"})}),Object(T.jsx)(v.a,{value:o,onChange:function(e){u(e)},label:"Name",type:"text",helpText:Object(T.jsx)("span",{children:"Choose a name for your image."})}),Object(T.jsx)(v.a,{value:p,onChange:function(e){d(e)},label:"Price",type:"number",helpText:Object(T.jsx)("span",{children:"Choose a price to sell your image."})}),Object(T.jsx)(S.a,{submit:!0,disabled:0===p.length||0===o.length||0===I.length,children:"Save"})]})})]}),J]})},A=n(123),P=n(242),k=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(s.a)(i,2),o=r[0],u=r[1],j=Object(a.useState)(!1),b=Object(s.a)(j,2),p=b[0],d=b[1],h=Object(a.useState)(!1),w=Object(s.a)(h,2),C=w[0],I=w[1],k=Object(a.useState)([]),E=Object(s.a)(k,2),U=E[0],N=E[1],J=Object(a.useState)(!1),_=Object(s.a)(J,2),B=_[0],D=_[1],F=Object(a.useState)({name:"",username:"",price:"",s3Url:""}),L=Object(s.a)(F,2),$=L[0],z=L[1],H=Object(a.useState)(""),M=Object(s.a)(H,2),W=M[0],Y=M[1],q=function(){var e=Object(O.a)(m.a.mark((function e(){var t,a,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/images/".concat(n));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c=a.images,0===(i=c.filter((function(e){return"inventory"===e.status}))).length?(u(!0),N([])):N(i);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){d((function(e){return!e}))},K=function(){I((function(e){return!e}))},Q=function(){D((function(e){return!e}))},R=function(){var e=Object(O.a)(m.a.mark((function e(){var t,n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/update-price",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:$.name,username:$.username,updatedPrice:W})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.image,c=U.map((function(e){return e.name===a.name&&e.username===a.username?(a.price=W,a):e})),N(c),G(),Q();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(O.a)(m.a.mark((function e(t){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/sell-image",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({imageId:t._id})});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,(c=a.image)&&(N(U.filter((function(e){return e._id!==c._id}))),K());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=o?Object(T.jsx)(f.a,{content:"No images found by that username :(",onDismiss:function(){u((function(e){return!e}))},duration:2e3}):null,Z=p?Object(T.jsx)(f.a,{content:"Successfully changed price!",onDismiss:G,duration:2e3}):null,ee=C?Object(T.jsx)(f.a,{content:"Successfully put up for sale!",onDismiss:K,duration:2e3}):null;return Object(T.jsxs)(x.a,{children:[Object(T.jsx)("br",{}),Object(T.jsx)(A.a,{open:B,onClose:Q,title:"Change price of ".concat(null===$||void 0===$?void 0:$.name),children:Object(T.jsx)(A.a.Section,{children:Object(T.jsx)(g.a,{onSubmit:R,children:Object(T.jsxs)(y.a,{children:[Object(T.jsx)(v.a,{value:W,onChange:function(e){Y(e)},label:"Price",type:"number",helpText:Object(T.jsx)("span",{children:"Enter in the updated price."})}),Object(T.jsx)(S.a,{submit:!0,disabled:0===W.length,children:"Enter"})]})})})}),Object(T.jsx)(l.a,{title:"Sell your images",sectioned:!0,children:Object(T.jsx)(g.a,{onSubmit:q,children:Object(T.jsxs)(y.a,{children:[Object(T.jsx)(v.a,{value:n,onChange:function(e){c(e)},label:"Username",type:"text",helpText:Object(T.jsx)("span",{children:"Enter in the same username you chose when uploading your image."})}),Object(T.jsx)(S.a,{submit:!0,disabled:0===n.length,children:"Enter"})]})})}),U.map((function(e){var t=e.name,n=e.price,a=e.s3Url;return Object(T.jsx)(P.a,{title:t,description:"Price: $".concat(n),portrait:!0,primaryAction:{content:"Sell this image",onAction:function(){return V(e)}},secondaryAction:{content:"Change price",onAction:function(){var t=Object(O.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z(e),Q();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},children:Object(T.jsx)("img",{src:a,width:"100%",height:"100%",style:{objectFit:"cover",objectPosition:"center"}})},t)})),X,Z,ee]})},E=n(236),U=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),r=Object(s.a)(i,2),o=r[0],u=r[1];Object(a.useEffect)((function(){Object(O.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/selling-images");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.images,u(a);case 8:case"end":return e.stop()}}),e)})))()}),[]);var j=function(){c((function(e){return!e}))},b=function(){var e=Object(O.a)(m.a.mark((function e(t){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/buy-image",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({imageId:t._id})});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,(c=a.image)&&(u(o.filter((function(e){return e._id!==c._id}))),j());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=n?Object(T.jsx)(f.a,{content:"Successfully purchased!",onDismiss:j,duration:2e3}):null;return Object(T.jsxs)(x.a,{children:[Object(T.jsx)("br",{}),Object(T.jsx)(l.a,{title:"Buy an image",sectioned:!0}),0===o.length?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("br",{}),Object(T.jsx)(E.a,{title:"No images for sale",status:"warning",children:Object(T.jsx)("p",{children:"Currently, there are no images for sale. Try uploading an image and selling it to see it here!"})})]}):o.map((function(e){var t=e.name,n=e.price,a=e.s3Url,c=e.username;return Object(T.jsx)(P.a,{title:"".concat(t,", by ").concat(c),description:"Price: $".concat(n),portrait:!0,primaryAction:{content:"Buy this image",onAction:function(){return b(e)}},children:Object(T.jsx)("img",{src:a,width:"100%",height:"100%",style:{objectFit:"cover",objectPosition:"center"}})},t)})),p]})},N=function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){var e=i.findIndex((function(e){return e.pathname===window.location.pathname}));c(e)}),[]);var i=[{id:"upload-image",pathname:"/upload",content:"Upload Image",accessibilityLabel:"Upload an Image",panelId:"upload-image-content-1"},{id:"sell-image",pathname:"sell",content:"Sell",accessibilityLabel:"Sell an Image",panelId:"sell-image-content-1"},{id:"buy-image",pathname:"buy",content:"Buy",accessibilityLabel:"Buy an Image",panelId:"buy-image-content-1"}];return Object(T.jsx)(o.a,{i18n:b,children:Object(T.jsx)(p.a,{children:Object(T.jsxs)(u.a,{title:"ImageHub",children:[Object(T.jsx)(l.a,{children:Object(T.jsx)(j.a,{tabs:i,selected:n,onSelect:function(e){c(e),window.location.pathname=i[e].pathname}})}),Object(T.jsxs)(d.d,{children:[Object(T.jsx)(d.b,{exact:!0,path:"/upload",component:I}),Object(T.jsx)(d.b,{exact:!0,path:"/sell",component:k}),Object(T.jsx)(d.b,{exact:!0,path:"/buy",component:U}),Object(T.jsx)(d.a,{to:"/upload"})]})]})})})};n(223);r.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(N,{})}),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.b26d7f13.chunk.js.map